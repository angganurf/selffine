<div class="explore-page-container reels-page-container">
	<div class="reels_hdr">
		<div class="circle_green"></div>
		<div class="circle_blue"></div>
		<div class="reels_hdr_title">{{LANG reels}}</div>
		<h4>{{LANG explore_reels_subtitle}}</h4>
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;" xml:space="preserve" class="feather"> <g> <g> <g> <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0.763" y1="9.9174" x2="56.443" y2="7.2774"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <path class="reel-st1" d="M33.4,8l0.7,0.7L34.8,8H33.4z"></path> <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="1.9269" y1="34.4659" x2="57.6069" y2="31.8259"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <path class="reel-st2" d="M56.8,16.8c-0.6-2.5-2-4.7-3.9-6.3c-1.1-0.9-2.3-1.5-3.7-2C48.1,8.2,47,8,45.8,8h-11l-0.7,0.7L33.4,8H18.2 c-1.6,0-3.1,0.3-4.5,0.9c-3.3,1.4-5.7,4.4-6.5,7.9C7,17.6,7,18.4,7,19.3v27.6c0,6.2,5,11.3,11.3,11.3h27.6C52,58.1,57,53,57,46.8 V19.3C57,18.4,56.9,17.6,56.8,16.8z M53,46.8c0,4-3.3,7.3-7.3,7.3H18.2c-4,0-7.3-3.3-7.3-7.3V19.3c0-0.8,0.1-1.7,0.4-2.4 c0.8-2.4,2.9-4.3,5.5-4.7c0.4-0.1,0.9-0.1,1.3-0.1h27.6c1.6,0,3,0.5,4.2,1.4c1.2,0.8,2.1,2.1,2.6,3.5c0.3,0.8,0.4,1.6,0.4,2.4 V46.8z"></path> </g> <g> <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="1.2556" y1="20.3077" x2="56.9356" y2="17.6677"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <path class="reel-st3" d="M53,19.3v1.6H11v-1.6c0-0.8,0.1-1.7,0.4-2.4h41.2C52.9,17.6,53,18.4,53,19.3z"></path> </g> <g> <g> <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="1.0572" y1="16.1221" x2="56.7372" y2="13.4821"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <polygon class="reel-st4" points="42.2,16.8 36.5,16.8 34.1,14.4 31.7,12 37.4,12 41.5,16.2 				"></polygon> <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="1.4833" y1="25.1102" x2="57.1633" y2="22.4702"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <polygon class="reel-st5" points="42.5,20.8 41.5,21.8 37.4,26 31.7,26 36.9,20.8 				"></polygon> </g> <g> <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="1.0251" y1="15.4452" x2="56.7051" y2="12.8052"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <path class="reel-st6" d="M27.3,16.8h-5.7l-4.7-4.7c0.4-0.1,0.9-0.1,1.3-0.1h4.2l4.2,4.2L27.3,16.8z"></path> <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="1.4498" y1="24.4029" x2="57.1298" y2="21.7629"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <polygon class="reel-st7" points="27.6,20.8 22.4,26 16.8,26 21.9,20.8 				"></polygon> </g> </g> <g> <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="1.6885" y1="29.4372" x2="57.3685" y2="26.7972"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <rect x="11" y="26" class="reel-st8" width="42.1" height="4"></rect> </g> </g> <linearGradient id="SVGID_9_" gradientUnits="userSpaceOnUse" x1="2.3005" y1="42.3458" x2="57.9805" y2="39.7058"> <stop offset="0" style="stop-color:#1A6DFF"></stop> <stop offset="1" style="stop-color:#C822FF"></stop> </linearGradient> <polygon class="reel-st9" points="39,41.2 26.1,33.7 26.1,48.7 	"></polygon> </g> </svg>
	</div>
		
	<div class="explore-posts-container">
		<?php if ($context['posts']) {
			foreach ($context['posts'] as $key => $post_data) {
				include 'includes/list.html';
			}
		} else{ 
			include 'includes/no-posts-found.html';
		} ?>
	</div>
</div>
<?php
	include $context['dirname_theme'].'/main/templates/modals/delete-post.html';
	include $context['dirname_theme'].'/main/templates/modals/embed_post.html';
	include $context['dirname_theme'].'/main/templates/includes/lazy-load.html';
	include $context['dirname_theme'].'/main/templates/modals/delete-comment.html';
?>

	<script>
		var myLazyLoad = new LazyLoad({
		    elements_selector: ".lazy_"
		});
		
		var gwidth = ($('.explore-posts-container').width() / 3);
		var config = {
			selector: '.item',
			gutter: 0,
			animate: true,
			animationOptions: { 
				speed: 100, 
				duration: 200
			}
		}
		
		if ($(window).width() > 992){
		    config.width = 250;
		};
		
		
		
		jQuery(document).ready(function($) {
			$(".container-reels .explore-posts-container").gridalicious(config);
			var scrolled = 0;
			var last_id  = 0;
			$(window).unbind('scroll');

			$(window).scroll(function() {
			    if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
			    	if (scrolled == 0 && $('.explore-postset').length > 0) {
		                scrolled = 1;
		                var list_ids = $("div.explore-postset[id]").map(function() {
							if($(this).attr('id') > 0) {
								return $(this).attr('id');
							}
			            }).get();

			            if (!list_ids) {
			                return false;
			            }
			            
        				var last_id  = Math.min.apply(Math,list_ids);

						$.ajax({
							url: link('posts/explore-reels'),
							type: 'GET',
							dataType: 'json',
							data: {offset:last_id},
						}).done(function(data) {
							if (data.status == 200) {
								$(".explore-posts-container").gridalicious('append', $(data.html));
								scrolled = 0;
							}
							else{
								$(window).unbind('scroll');
							}
						});
		       		}
			    }
			});
			
			$(document).ready(function(){
				$('#follow__suggestions-cr').slick({
				infinite: false,
				lazyLoad: 'ondemand',
				slidesToShow: 5,
				variableWidth: false,
				slidesToScroll: 1,
				autoplay: false,
				autoplaySpeed: 2000,
				responsive: [
					{
						breakpoint: 1024,
						settings: {
							slidesToShow: 4
						}
					},
					{
						breakpoint: 800,
						settings: {
							slidesToShow: 3
						}
					},
					{
						breakpoint: 600,
						settings: {
							slidesToShow: 2
						}
					},
					{
						breakpoint: 300,
						settings: {
							slidesToShow: 1
						}
					}
				]
				});
			});
		});

	</script>